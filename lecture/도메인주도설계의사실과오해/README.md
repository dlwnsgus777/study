## 도메인 주도 설계의 사실과 오해

---

최근 DDD가 유행처럼 다시 올라오고 있지만 본질을 이해하지 못하고 접근하는 경우가 많다.

대부분의 경우에는 DDD와 객체지향이 섞여있는 상황이다.
- 이게 나쁜 건 아니다.
- 실질적으로 객체지향과 DDD를 헷갈려한다.

DDD는 답이 없다.
- 해석의 영역이 많다.

결론적으로 DDD와 객체지향은 완전히 다르다.

### Part1

---

소프트웨어의 본질
- 그 소프트웨어의 사용자를 위해 도메인에 관련된 문제를 해결하는 능력

DDD는 사용자의 문제를 해결해야한다는 관점에서 시작함.
- 사용자의 문제를 해결해야하기 때문에 도메인에 포커스를 맞추어야한다는게 본질이다.

DDD는 에릭 에반스가 정의한 이름이다.
- DDD는 구현의 관점보다는 사고방식이다.
- 복잡한 도메인을 다뤄야하는 사고방식
  - 어디에 우선순위를 두어야할지에 대한 모음
- DDD는 도메인을 해결하기 위한 __패턴들의 집합체__

객체지향의 기반은 다음과 같다.
> 사용자의 요구사항을 위한 기능을 개발할 때 어떻게 기능을 나누고 배분을 하면 유지보수하기 편한 코드가 나온다

DDD는 더 광범위함
- 디자인 패턴과 비슷함
  - 어떤 문제가 있을 때는 이런 패턴으로 했을 때 문제가 더 단순해진다
- DDD는 선택적으로 사용하는 것
  - DDD는 패턴랭귀지

에릭에반스의 도메인주도설계
- 무슨 말인지 모르겠음
- 대부분은 `part2` 까지 일고 안읽음
- 이 책 이후에 나온 책들은 DDD의 많은 사상을 덜어냄
  - 도메인주도설계에 대한 해석의 영역

---

지금부터는 에릭에반스의 도메인주도설계에 대한 설명이다.

DDD를 얘기할 때에는 `part1`의 내용이 본질이다.

### Part1 

도메인 모델을 동작하게 만드는 것이 핵심.

단어를 하나씩 정리해보자.

도메인 모델
- 도메인 모델의 정의는 많다.
  - 바라보는 사람, 상황마다 다름

도메인
- 사용자가 프로그램을 사용하는 주제 영역
  - 우리가 소프트웨어를 만든다는 건 문제가 있다는 것
    - 불편함, 니즈 등등
  - 이 니즈를 해결하기 위해 소프트웨어를 만든다
    - 프로그램으로 어디서부터 어디까지 개발해야하는지를 정한다.
- 어떤 문제가 있을 때 여기서부터 여기까지 소프트웨어에 담을 것이다 -> 이것이 도메인
  - 이 도메인을 가지고 모델링을 하는게 도메인 모델

모델
- 대상의 단순화
- 당면한 문제를 해결하는 것과 관련된 측면을 추상화하고 중요하지 않은 부분은 생략
- 내가 문제를 풀 때 필요한 것만 가져오고 복잡한 것은 단순화

도메인 모델
- 여기서부터 여기까지는 프로그램에 넣을 것이다.
- 그 뒤 문제를 단순화 시켜서 정리한다.
  - 관련자들끼리 싱크를 맞춘다.
- 정해진 형식은 없다
  - 형태나 형식보다는 목적이 중요하다
  - 목적은 코드를 잘짜고 싶은 것
- 심플하고 공감되는 무언가를 보여줄 수 있으면 도메인 모델이다.

동작하는 
- 도메인 모델을 만들었으면 그걸 기반으로 설계하고 코드에 반영
- 코드가 바뀐다 -> 도메인의 개념이 바뀐다.
- 도메인 모델 = 코드
  - 내가 짠 코드가 도메인 모델이어야한다.
- 코드이기 때문에 실행이 가능해야한다. -> 동작하게 만든다.
- 코드를 바꾸면 도메인 모델이 바뀐 것
  - 도메인 모델이 바뀌면 코드도 바뀐다.
- 전부 없애고 코드만 남았을 때에도 코드를 보고 도메인을 설명할 수 있어야한다.

만들기
- 어떻게의 영역
- 도메인 모델을 만든다는 것 -> 코드를 만드는 것
  - 개발자가 도메인을 알 수 없다.
  - 도메인 전문가
    - 도메인에 대해서 결정을 내릴 수 있는 사람
  - 유비쿼터스 언어
    - 개발자와 도메인 전문가와의 언어에서 교집합을 만든 것
      - 소통하다보면 자연스럽게 만들어진다.
- 디자인이라는 건 코드를 잘 짜고 싶은 것
  - 코드를 바꿀 떄 변경하기 편하게 짜고 싶은 것 -> 모든 설계의 철학
  - 코드가 바뀌느 건 도메인이 바뀌는 것
    - 사업이 바뀌거나 등등
    - 도메인이 바뀌면 당연히 코드가 바뀜
      - 도메인이 바뀔 때 코드를 쉽게 변경하고 싶은게 목적
        - 객체지향은 작은 단위에서의 코드
        - DDD는 좀 더 큰 영역이다.

여기까지가 `part1`의 내용이다.

설계는 전부 가이드이고 결국 트레이드 오프를 하여 상황에 적절한 설계를 사용해야한다.

---

DDD는 지금 읽어보면 당연한 내용들이 많다.

하지만 DDD가 처음 나왔을 때에는 지금과는 상황이 많이 달랐다.

90년도 초 ~ 2000년 중반까지 어마어마하게 바뀐 시기
- 지금은 상식처럼 받아들여지는 모든게 그때에는 이상했다.
  - 대표적으로 리펙터링


