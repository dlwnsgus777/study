## 도메인 모델 시작하기

---

### 도메인이란

도메인이랑 소프트웨어로 해결하고자 하는 문제 영역이다.

한 도메인은 다시 하위 도메인으로 나눌 수 있다.

특정 도메인을 위한 소프트웨어라고 해서 도메인이 제공해야 할 모든 기능을 직접 구현하는 것은 아니다.

예를들어 배송 시스템을 직접 구축하기보단 외부 배송 업체의 시스템을 사용하고 배송 추적 정보를 제공하는데 필요한 기능만 일부 연동한다.

나머지 기능은 외부 업체의 시스템을 사용한다.

도메인마다 고정된 하위 도메인이 존재하는 것은 아니다.

하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라진다.

### 도메인 전문가와 개발자 간 지식 공유

각 영역에는 전문가가 있는데 이들 전문가는 해당 도메인에 대한 지식과 경험을 바탕으로 본인들이 원하는 기능 개발을 요구한다.

개발자는 이런 요구사항을 분석하고 설꼐하여 코드를 작성하고 테스트하고 배포한다.

코딩에 앞서 요구사항을 올바르게 이해하는 것이 중요하다.

요구사항을 올바르게 이해하는 간단한 방법은 개발자와 전문가가 직접 대화하는 것이다.

개발자와 전문가 사이에 내용을 전파하는 전달자가 많으면 많을수록 정보가 왜곡되고 손실이 발생하게 된다.

도메인 전문가 만큼은 아니지만 이해관계자와 개발자도 도메인 지식을 갖춰야 한다.

제품 개발과 관련된 도메인 전문가, 관계자, 개발자가 같은 지식을 공유하고 직접 소통할수록 도메인 전문가가 원하는 제품을 만들 가능성이 높아진다.

### 도메인 모델

도메인 모델은 특정 도메인을 개념적으로 표현한 것이다.

도메인을 이해하는 데 도움이 된다면 도메인 모델 표현 방식이 무엇인지는 중요하지 않다.

도메인 모델은 기본적으로 도메인 자체를 이해하기 위한 개념 모델이다.

개념 모델을 이용해 바로 코드를 작성할 수 있는 것은 아니기 때문에 구현 기술에 맞는 구현 모델이 따로 필요하다.

개념 모델과 구현 모델은 서로 다르지만 구현 모델이 개념 모델을 최대한 따르도록 할 수 있다.

각 하위 도메인이 다루는 영역은 서로 다르기 때문에 같은 용어라도 하위 도메인마다 의미가 달라질 수 있다.

도메인에 따라 용어 의미가 결정되므로 여러 하위 도메인을 하나의 다이어그램에 모델링하면 안된다.

모델의 각 구성요소는 특정 도메인으로 한정할 때 비로소 의미가 완전해지기 때문에 각 하위 도메인마다 별도로 모델을 만들어야 한다.

### 도메인 모델 패턴

일반적인 애플리케이션 아키텍쳐는 4개의 영역으로 구성된다.

- 사용자 인터페이스 또는 표현: 사용자의 요청을 처리하고 사용자에게 정보를 보여준다.
- 응용: 사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해 기능을 실행한다.
- 도메인: 시스템이 제공할 도메인 규칙을 구현한다.
- 인프라스트럭쳐: 데이터베이스나 메시징 시스템과 같은 외부 시스템과의 연동을 처리한다.

도메인 모델은 아키텍쳐 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴을 말한다.

도메인 계층은 도메인의 핵심 규칙을 구현한다.

주문 도메인의 경우 '출고 전에 배송지를 변경할 수 있다' 라는 규칙과 '주문 취소는 배송 전에만 할 수 있다'라는 규칙을 구현한코드가 도메인 계층에 위치하게 된다.

이런 도메인 규칙을 객체 지향 기법으로 구현하는 패턴이 **도메인 모델 패턴**이다.

