## 디폴트 메서드

---

인터페이스에 새로운 메서드를 추가하게 되면 해당 인터페이스를 구현하는 클래스들도 수정해야햔다.

때문에 인터페이스에 새로운 기능을 추가하기가 어려웠다.

자바 8에서는 이러한 문제를 해결하기 위해 기본 구현을 포함하는 인터페이스를 정의하는 방법 2가지를 제공한다.

1. 정적 메서드
2. 디폴트 메서드

이로인해 자바8 에서는 **메서드 구현을 포함하는 인터페이스**를 정의할 수 있다.

이렇게 하면 기존의 구현을 바꾸도록 강요하지 않으면서 인터페이스에 새로운 기능을 추가할 수 있다.

대표적으로 `List` 인터페이스의 `sort` 가 있다.

```java
default void sort(Comparator<? super E> c) {
  Collections.sort(this, c);
}
```

`default`라는 키워드는 해당 메서드가 디폴트 메서드임을 가리킨다.

---

### 호환성

자바 프로그램을 바꾸는 것과 관련된 호환성 문제는 크게 세 가지로 나뉜다.

- 바이너리 호환성
  - 뭔가를 바꾼 이후에도 에러 없이 기존 바이너리가 실행될 수 있는 상황
- 소스 호환성
  - 코드를 고쳐도 기존 프로그램을 성공적으로 재컴파일 할 수 있는 상황
- 동작 호환성
  - 코드를 바꾼 다음에도 입력값이 주어지면 프로그램이 같은 동작을 실행하는 상황

### 추상 클래스와 인터페이스의 차이

- 클래스는 하나의 추상 클래스만 상속받을 수 있지만 인터페이스를 여러개 구현할 수 있다.
- 추상 클래스는 인스턴스 변수로 공통 상태를 가질 수 있다. 하지만 인터페이스는 인스턴스 변수를 가질 수 없다.

### 해석 패턴

자바의 클래스는 하나의 클래스를 상속받지만 여러 인터페이스를 구현할 수 있기 때문에 같은 시그니처를 갖는 디폴트 메서드를 상속받는 상황이 생길 수 있다.

이런 상황에서 자바는 몇가지 규칙을 정해 어떤 메서드를 호출할지 결정한다.

1. 클래스가 항상 이긴다.

- 클래스나 슈퍼 클래스에서 정의한 메서드가 디폴트 메서드보다 우선권을 갖는다.

2. 1번 규칙 이외의 상황에서는 서브 인터페이스가 이긴다.
   - 상속관계를 갖는 인터페이스에서 같은 시그니처를 갖는 메서드를 정의할 때는 서브 인터페이스가 이긴다.
   - B가 A를 상속받는다면 B가 A를 이긴다.
3. 여전히 디폴트 메서드의 우선순위가 결정되지 않는다면 여러 인터페이스를 상속받는 클래스가 명시적으로 티폴트 메서드를 **오바라이드**하고 호출해야 한다.
