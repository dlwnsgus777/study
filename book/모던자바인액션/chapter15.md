## 리액티브 프로그래밍 컨셉의 기초

---

앞으로 만들 웹 애플리케이션은 다양한 소스의 콘텐츠를 가져와 합치는 매시업 형태가 될 가능성이 크다.

다양한 서비스의 응답을 기다리는 동안 연산이 블록되거나 CPU 클록 사이클 자원을 낭비하고 싶지는 않다.

이때 이 작업을 여러 하위 태스크로 나눠 CPU의 다른 코어 또는 다른 머신에서 태스크를 **병렬**로 실행한다.

반면 연관된 작업을 같은 CPU에서 동작하는 것 또는 코어를 바쁘게 유지하는 것이 목표인 **동시성을 필요로 하는 상황**에서는 스레드를 블록함으로 인한 연산 자원을 낭비하는 일은 피해야한다.

이런 환경에서 사용할 수 있는 두 가지 도구를 자바에서 제공한다.

- 자바 8의 `CompletableFuture`
- 자바 9에서 추가된 리액티브 프로그램이 개념의 Flow API

동시성과 병렬성의 차이는 다음과 같다.

- 동시성은 단일 코어 머신에서 발생할 수 있는 프로그래밍 속성
- 병렬성은 병렬 실행을 하드웨어 수준에서 지원

### 동시성을 구현하는 자바 지원의 진화

처음 자바는 `Runnable`, `Thread` 를 동기화된 클래스와 메서드를 이용해 **잠궜다.**

자바 5에서는 스레드 실행과 태스크 제출을 분리하는 `ExcuterService` 인터페이스와 `Runnable`, `Thread`의 변형을 반환하는 `Callable<T>`, `Future<T>`, 제네릭을 지원했다.

자바 7에서는 **포크/조인 프레임워크**와 `RecursiveTask`가 추가되었고

자바 8에서는 스트림과 새로 추가된 람다 지원에 기반한 병렬 프로세싱이 추가되었다.

또한 동시성을 강화하기 위해 `Future`를 조합하는 기능을 자바 8에 추가했고, 자바 9에서는 분산 비동기 프로그래밍을 명시적으로 지원한다.

`CompletableFuture`와 `Flow API`의 궁극적인 목표는 **가능한한 동시에 실행할 수 있는 독립적인 태스크를 만들면서 멀티코어 또는 여러 기기를 통해 제공되는 병렬성을 쉽게 이용하는 것**이다.

### 스레드와 높은 수준의 추상화

스레드는 본인이 가진 프로세스와 같은 주소 공간을 공유하는 프로세스이다.

멀티코어 설정에서는 스레드의 도움없이 프로그램이 컴퓨팅 파워를 모두 활용할 수 없다.

프로그램이 스레드를 사용하지 않는다면 효율성을 고려해 여러 프로세서 코어 중 한 개만을 사용할 것이다.
